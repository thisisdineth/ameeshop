<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Amee-Tea | Raw Tea Inventory</title>
    <meta name="description" content="Amee-Tea - Raw Tea Inventory Management" />
    <link rel="icon" type="image/png" href="tealeaf.png" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="tbs.css">
</head>
<body>
    <div id="app" class="app-container">
        <nav id="top-navbar">
            <div class="container nav-container">
                <div class="nav-brand">
                    <a href="index.html" class="nav-logo-link"><i class="fas fa-leaf nav-logo-icon"></i> Amee-Tea</a>
                </div>
                <div id="mobile-menu-button-container">
                    <button id="mobile-menu-button"><i class="fas fa-bars nav-mobile-icon"></i></button>
                </div>
                <div id="desktop-nav-links">
                    <a href="index.html" class="navbar-item"><i class="fas fa-tachometer-alt fa-fw"></i> <span>Dashboard</span></a>
                    <a href="raw_tea.html" class="navbar-item active"><i class="fas fa-boxes-stacked fa-fw"></i> <span>Raw Tea</span></a>
                    <a href="packing_material.html" class="navbar-item"><i class="fas fa-box-archive fa-fw"></i> <span>Packing Material</span></a>
                    <a href="production.html" class="navbar-item"><i class="fas fa-industry fa-fw"></i> <span>Production</span></a>
                                    <a href="finished_products.html" class="mobile-navbar-item"><i class="fas fa-mug-hot fa-fw"></i> <span>Finised Product</span></a>
                    <a href="sales.html" class="navbar-item"><i class="fas fa-shopping-cart fa-fw"></i> <span>Sales</span></a>
                    <a href="customer.html" class="navbar-item"><i class="fas fa-users fa-fw"></i> <span>Customer</span></a>
                   
                </div>
            </div>
            <div id="mobile-menu" class="hidden">
                <a href="index.html" class="mobile-navbar-item"><i class="fas fa-tachometer-alt fa-fw"></i> <span>Dashboard</span></a>
                <a href="raw_tea.html" class="mobile-navbar-item active"><i class="fas fa-boxes-stacked fa-fw"></i> <span>Raw Tea</span></a>
                <a href="packing_material.html" class="mobile-navbar-item"><i class="fas fa-box-archive fa-fw"></i> <span>Packing Material</span></a>
                <a href="production.html" class="mobile-navbar-item"><i class="fas fa-industry fa-fw"></i> <span>Production</span></a>
                                <a href="finished_products.html" class="mobile-navbar-item"><i class="fas fa-mug-hot fa-fw"></i> <span>Finished Products</span></a>
                <a href="sales.html" class="mobile-navbar-item"><i class="fas fa-shopping-cart fa-fw"></i> <span>Sales</span></a>
                <a href="customer.html" class="mobile-navbar-item"><i class="fas fa-users fa-fw"></i> <span>Customer</span></a>
                
        </nav>

        <main class="main-content">
            <div class="container">
                <h1 class="page-title"><i class="fas fa-boxes-stacked fa-fw"></i> Raw Tea Inventory</h1>

                <div class="table-management-controls section-card">
                    <button id="addNewTableBtn" class="btn btn-primary">
                        <i class="fas fa-plus fa-fw"></i> Add New Raw Tea Table
                    </button>
                    <div id="newTableModal" class="modal">
                        <div class="modal-content">
                            <span class="modal-close-button">&times;</span>
                            <h2 class="modal-title">Create/Select Raw Tea Table</h2>
                            <label for="tableNameInput" class="form-label">Table Name (e.g., Green Tea Grade A):</label>
                            <input type="text" id="tableNameInput" class="form-input" placeholder="Enter unique table name">
                            <ul id="existingTableSuggestions" class="suggestions-list"></ul>
                            <button id="createOrSelectTableBtn" class="btn btn-success btn-block mt-1">
                                <i class="fas fa-check fa-fw"></i> Create or Select Table
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="all-tables-list-container section-card">
                    <h3 class="section-title">Manage alredy created Raw Tea Tables</h3>
                    <div class="form-group">
                        <label for="searchTableInput" class="form-label">Search Tables:</label>
                        <input type="text" id="searchTableInput" class="form-input" placeholder="Enter table name to search...">
                    </div>
                    <ul id="allTablesList" class="item-list"></ul>
                </div>

                <div id="currentTableDisplay" class="section-card hidden">
                    <h2 id="currentTableNameDisplay" class="section-title current-table-name"></h2>
                    <p class="current-balance-summary">Current Balance: <strong id="currentCalculatedBalance">0.00 Kg</strong></p>
                    <div class="table-responsive-wrapper">
                        <table id="rawTeaTable" class="data-table">
                            <thead>
                                <tr>
                                    <th class="table-header">Date</th>
                                    <th class="table-header text-center">Type</th>
                                    <th class="table-header">Supplier/Product</th>
                                    <th class="table-header">Estate</th>
                                    <th class="table-header">Grade</th>
                                    <th class="table-header text-right">Bag Wt (Kg)</th>
                                    <th class="table-header text-right">No. Bags</th>
                                    <th class="table-header text-right">Inflow (Kg)</th>
                                    <th class="table-header text-right">Outflow (Kg)</th>
                                    <th class="table-header text-right">Balance (Kg)</th>
                                    <th class="table-header text-center">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="rawTeaTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <div id="addRowFormContainer" class="section-card hidden">
                    <h3 class="section-title">Add New Inflow to <span id="addRowFormTableName"></span></h3>
                    <form id="addRowForm">
                        <div class="form-group">
                            <label for="transactionDate" class="form-label">Inflow Date:</label>
                            <input type="date" id="transactionDate" class="form-input" required>
                        </div>
                        <div class="form-grid grid-cols-3">
                            <div class="form-group">
                                <label for="inflowSupplier" class="form-label">Supplier:</label>
                                <input type="text" id="inflowSupplier" class="form-input" placeholder="Supplier Name">
                            </div>
                            <div class="form-group">
                                <label for="inflowEstate" class="form-label">Estate:</label>
                                <input type="text" id="inflowEstate" class="form-input" placeholder="Tea Estate">
                            </div>
                            <div class="form-group">
                                <label for="inflowGrade" class="form-label">Grade:</label>
                                <input type="text" id="inflowGrade" class="form-input" placeholder="e.g., BOP, OP, Pekoe">
                            </div>
                        </div>
                        <div class="form-grid grid-cols-3">
                            <div class="form-group">
                                <label for="inflowBagWeight" class="form-label">Bag Weight (Kg):</label>
                                <input type="number" step="any" id="inflowBagWeight" class="form-input" placeholder="0.00">
                            </div>
                            <div class="form-group">
                                <label for="inflowBags" class="form-label">Number of Bags:</label>
                                <input type="number" step="1" id="inflowBags" class="form-input" placeholder="0">
                            </div>
                            <div class="form-group">
                                <label for="inflowTotalWeight" class="form-label">Total Inflow Weight (Kg):</label>
                                <input type="number" step="any" id="inflowTotalWeight" class="form-input" placeholder="Calculated or Manual" readonly>
                                <p class="form-hint">Auto-calculated if Bag Weight and No. of Bags are entered.</p>
                            </div>
                        </div>
                         <div class="form-group">
                            <label for="inflowNotes" class="form-label">Notes (Optional):</label>
                            <textarea id="inflowNotes" class="form-input" rows="2" placeholder="Any notes for this inflow..."></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary btn-block">
                            <i class="fas fa-plus fa-fw"></i> Add Inflow
                        </button>
                    </form>
                </div>
            </div>
        </main>
    </div>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-database-compat.js"></script>
    <script src="raw_tea.js"></script>
</body>
</html>